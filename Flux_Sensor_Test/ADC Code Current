#include <Wire.h>
#include <Adafruit_ADS1015.h>
#include <SparkFunTMP102.h>

 const float a0 = 0.0;
 const float a1 = 0.0025928;
 const float a2 = -0.0000007602961;
 const float a3 = 0.00000000004637791;
 const float a4 = -0.000000000000002165394;
 const float a5 =  0.00000000000000000006048144;
 const float a6 =  -0.0000000000000000000000007293422;

Adafruit_ADS1115 adc1(0x48);
Adafruit_ADS1115 adc3(0x49);
Adafruit_ADS1115 adc2(0x4B);
Adafruit_ADS1115 dgoshit(0x4A);
void setup() {
  adc1.begin();
  adc2.begin();
  adc3.begin();
  dgoshit.begin();
  Serial.begin(9600);
  adc1.setGain(GAIN_SIXTEEN);
  adc2.setGain(GAIN_SIXTEEN);
  adc3.setGain(GAIN_SIXTEEN);
  dgoshit.setGain(GAIN_SIXTEEN);
}

//10152 sensor. Whatever ADC this one gets plugged into needs to switch the 01 and 23. Right now plugged into top ADC (4A). 


void loop() {
  int16_t S1T, S2T, S3T, S4T, S1HF, S2HF, S3HF, S4HF;
  
  S1HF = adc1.readADC_Differential_2_3();
  S1T = adc1.readADC_Differential_0_1();
  float S1Tf = (float)S1T;
  S1Tf = S1Tf*7.8125 ; 
  float T1 = a0 + (a1*(S1Tf)) + (a2*pow(S1Tf, 2)) + (a3*pow(S1Tf, 3)) + (a4*pow(S1Tf, 4)) + (a5*pow(S1Tf, 5)) + (a6*pow(S1Tf, 6));
 
    
  S2HF = adc2.readADC_Differential_2_3();
  S2T = adc2.readADC_Differential_0_1();
  float S2Tf = (float)S2T; 
  S2Tf = S2Tf*7.8125 ; 
  float T2 = a0 + (a1*(S2Tf)) + (a2*pow(S2Tf, 2)) + (a3*pow(S2Tf, 3)) + (a4*pow(S2Tf, 4)) + (a5*pow(S2Tf, 5)) + (a6*pow(S2Tf, 6));


  S3HF = adc3.readADC_Differential_2_3();
  S3T = adc3.readADC_Differential_0_1();
  float S3Tf = (float)S3T; 
  S3Tf = S3Tf*7.8125 ; 
  float T3 = a0 + (a1*(S3Tf)) + (a2*pow(S3Tf, 2)) + (a3*pow(S3Tf, 3)) + (a4*pow(S3Tf, 4)) + (a5*pow(S3Tf, 5)) + (a6*pow(S3Tf, 6));
 


  S4HF = dgoshit.readADC_Differential_0_1();
  S4T = dgoshit.readADC_Differential_2_3();
  float S4Tf = (float)S4T; 
  S4Tf = S4Tf*7.8125 ; 
  float T4 = a0 + (a1*(S4Tf)) + (a2*pow(S4Tf, 2)) + (a3*pow(S4Tf, 3)) + (a4*pow(S4Tf, 4)) + (a5*pow(S4Tf, 5)) + (a6*pow(S4Tf, 6));
 
  
  //Serial.print("Sensor 1 Tempurature CAL:");
  //Serial.println(T1); 
  Serial.print("Sensor 1 Tempurature:");
  Serial.println(S1T); 
  //Serial.print("Sensor 2 Tempurature CAL:");
  //Serial.println(T2);
  //Serial.print("Sensor 2 Tempurature:");
  //Serial.println(S2T);
  //Serial.print("Sensor 3 Tempurature CAL:");
  //Serial.println(T3);
  //Serial.print("Sensor 3 Tempurature:");
  //Serial.println(S3T);
  //Serial.print("Sensor 4 Tempurature CAL:");
  //Serial.println(T4);
  //Serial.print("Sensor 4 Tempurature:");
  //Serial.println(S4T);

  Serial.print("Sensor 1 Heat Flux:");
  Serial.println(S1HF);
  //Serial.print("Sensor 2 Heat Flux:");
  //Serial.println(S2HF);
  //Serial.print("Sensor 3 Heat Flux:");
  //Serial.println(S3HF);
  //Serial.print("Sensor 4 Heat Flux:");
  //Serial.println(S4HF);
   delay(400);

}
